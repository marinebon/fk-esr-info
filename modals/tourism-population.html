<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tourism population via tax revenue</title>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-176398491-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-176398491-1');
  </script>
  
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://noaa-iea.github.io/fk-esr-info/assets/js/highcharts_wrapper.js"></script>
  <link rel="stylesheet" href="https://noaa-iea.github.io/fk-esr-info/assets/css/infographiq.css" />
</head>
<body>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

<div class = "caption_text">
Though experts agreed that tourism visitation was an important indicator, data on this metric was surprisingly hard to
come by, due to the need to capture all types of overnight visitors, day trip visitors, both in state and out of state visitors,
and international as well as domestic visitors. Additionally, each municipality has a different method of recording number
of visitors. Thus, this study was recommended to review trends in the tourist tax revenue collected as a proxy to capture the longest time series trends in all categories of
visitors. Data was adjusted to reflect changes through time in the percentage of tax levied. Of note is a recent decrease occurred in 2017 due to Hurricane Irma making
landfall in the Lower Keys.
Source: <a href="https://www.keywestchamber.org/" target='_parent'>Key West Chamber of Commerce</a>
</div>

<script>
  csv   = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR2QEK4lRwEOx1edeyGwU57i-jrr7PdnjFtTHart0Ow5ooHn4lImxVEacgK1E3Z8h1_DjkOeP4vlCtk/pub?gid=148237486&single=true&output=csv';
  title = 'Tourism population via tax revenue';
  icon  = 'tourism-population';

  x_axis_label = "Year";
  y_axis_label = 'Tourist Tax Revenue';
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in the Google Sheet 'icons to data | fk-esr-info'."
  } 
  //The chart for hurricane coastal protections is a bar chart and has to be handled differently than all other modal windows
  else if (icon == 'hurricane-coastal-protections') {
    Highcharts.chart('container', { 
      chart: {type: 'column'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv},
      xAxis: {title: {text: "Storm Frequency"}},
      yAxis: {title: {text: "2010 Dollars"}},
      legend: {enabled: false}
    });
  }
  else if (icon == 'SST'){ // the SST modal window is another unusual case (the data format is very different)
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label, undefined, undefined, 
      SST = true
    );
  }
  else if (icon == 'stonecrab'){ // the stone crab modal window is another unusual case (2 y-axes)
    Highcharts.chart('container', { 
      chart: {type: 'line'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        yAxis: 0,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        },
        {
        yAxis: 1,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        }],
      xAxis: {
        plotBands: [{
          from: 2011, 
          to: 2018,
          color: '#DEDEFF',
          label: {text: 'Trends Since 2011', align: 'center'}
        }],
        title: {text: x_axis_label}},
      yAxis: [{title: {text:'Stone Crab Pounds Landed'},opposite: true},  
                {title: {text:'Stone Crab Trips'},opposite: false}
        ]
    });
  }
    else if (icon == 'lobster'){ // the lobster modal window is another unusual case (2 y-axes)
    Highcharts.chart('container', { 
      chart: {type: 'line'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        yAxis: 1,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        },
        {
        yAxis: 0,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        }],
      xAxis: {
        plotBands: [{
          from: 2011, 
          to: 2018,
          color: '#DEDEFF',
          label: {text: 'Trends Since 2011', align: 'center'}
        }],
        title: {text: x_axis_label}},
      yAxis: [{title: {text:'Lobster Trips'},opposite: true},  
                {title: {text:'Lobster Landings (Pounds)'},opposite: false}
        ]
    });
  }
  else { // all other modal windows
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label
    );
  }
</script>

</body>
</html>
