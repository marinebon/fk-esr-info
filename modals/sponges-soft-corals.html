<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Barrel sponges count</title>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-176398491-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-176398491-1');
  </script>
  
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://noaa-iea.github.io/fk-esr-info/assets/js/highcharts_wrapper.js"></script>
  <link rel="stylesheet" href="https://noaa-iea.github.io/fk-esr-info/assets/css/infographiq.css" />
</head>
<body>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

<div class = "caption_text">
Volume and colony count of barrel (genus Xesto) sponges generally rose, then declined since 2017. This could be the result of a number of disturbances: Hurricane Irma in September 2017, or the spread of disease on the reef tract in 2017-2018.

Source: <a href="https://myfwc.com/research/habitat/coral/" target='_parent'>FWC Fish and Wildlife Research Institute Coral Reef Evaluation and Monitoring Project</a>
</div>

<script>
  csv   = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSKIpq-3maRMy_EsOuo8GhMxCwNpTYF_6Zs4u_tezd-2v6ACdBMopv9ubI1rPXMJ6_Y92U2XyrP1B86/pub?gid=49603026&single=true&output=csv';
  title = 'Barrel sponges count';
  icon  = 'sponges-soft-corals';

  x_axis_label = "Year";
  y_axis_label = 'Colony Count';
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in the Google Sheet 'icons to data | fk-esr-info'."
  } 
  //The chart for hurricane coastal protections is a bar chart and has to be handled differently than all other modal windows
  else if (icon == 'hurricane-coastal-protections') {
    Highcharts.chart('container', { 
      chart: {type: 'column'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv},
      xAxis: {title: {text: "Storm Frequency"}},
      yAxis: {title: {text: "2010 Dollars"}},
      legend: {enabled: false}
    });
  }
  else if (icon == 'SST'){ // the SST modal window is another unusual case (the data format is very different)
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label, undefined, undefined, 
      SST = true
    );
  }
  else if (icon == 'stonecrab'){ // the stone crab modal window is another unusual case (2 y-axes)
    Highcharts.chart('container', { 
      chart: {type: 'line'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        yAxis: 0,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        },
        {
        yAxis: 1,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        }],
      xAxis: {
        plotBands: [{
          from: 2011, 
          to: 2018,
          color: '#DEDEFF',
          label: {text: 'Trends Since 2011', align: 'center'}
        }],
        title: {text: x_axis_label}},
      yAxis: [{title: {text:'Stone Crab Pounds Landed'},opposite: true},  
                {title: {text:'Stone Crab Trips'},opposite: false}
        ]
    });
  }
    else if (icon == 'lobster'){ // the lobster modal window is another unusual case (2 y-axes)
    Highcharts.chart('container', { 
      chart: {type: 'line'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        yAxis: 1,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        },
        {
        yAxis: 0,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        }],
      xAxis: {
        plotBands: [{
          from: 2011, 
          to: 2018,
          color: '#DEDEFF',
          label: {text: 'Trends Since 2011', align: 'center'}
        }],
        title: {text: x_axis_label}},
      yAxis: [{title: {text:'Lobster Trips'},opposite: true},  
                {title: {text:'Lobster Landings (Pounds)'},opposite: false}
        ]
    });
  }
  else { // all other modal windows
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label
    );
  }
</script>

</body>
</html>
