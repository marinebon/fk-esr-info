<html>
<head>
  <meta charset="utf-8">
  <title>Green macroalgae abundance on reef sites</title>
</head>
<body>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

Calcareous green macroalgae is a calcifier and contributes to the carbonate budget of reef ecosystems in a positive way. This
is important in allowing coral reefs to accrete rather chemically dissolve. Total abundance of calcareous green macroalgae
on monitored Florida Keys reef sites has declined in the last five years.

Source: <a href="https://www.coris.noaa.gov/monitoring/">NOAA National Coral Reef Monitoring Program surveys</a>

<script>
  csv   = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS8CDz73Mokrx4ZI8fqOIZONfqbk_grBPgFJ-jQRZxrJuqcaDP1uFxNTykcggBdEM0ik6IiGW7ExuY6/pub?gid=2067262768&single=true&output=csv';
  title = 'Green macroalgae abundance on reef sites';
  icon  = 'macroalgae';

  x_axis_label = "Year";
  y_axis_label = 'Total abundance';
  year_max     = 2018;      // TODO: to use JS to read in max year, presumably 1st column
  years_band   = 5;
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in this Google Sheet: <a href='https://docs.google.com/spreadsheets/d/1_o8HOiZ_35uajupEsw6xLSsneTBTeLh0bqvFQvMpBNY/edit#gid=0'>icons to data | fk-esr-info</a>."
  } else {
    Highcharts.chart('container', {
      title: {text: title},
      credits: {enabled: false},
      data: {
        csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        name: 'value', 
        showInLegend: true,
        marker: {
          enabled: false,
          fillColor: 'white',
          lineWidth: 1,
          lineColor: Highcharts.getOptions().colors[0] }}],
      xAxis: {
        plotBands: [{
          from: year_max - years_band, 
          to: year_max,
          color: '#DEDEFF'}],
        title: {text: x_axis_label}},
      yAxis: {
        title: {text: y_axis_label} }});
  }
</script>

</body>
</html>
