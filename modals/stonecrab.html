<html>
<head>
  <meta charset="utf-8">
  <title>Stonecrab commercial fishing trips</title>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://marinebon.org/fk-esr-info/assets/js/highcharts_wrapper.js"></script>
  <link rel="stylesheet" href="https://marinebon.org/fk-esr-info/assets/css/infographiq.css" />
</head>
<body>



<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

<div class = "caption_text">
The selected economically important species referred to data collected by Florida
Fish and Wildlife Conservation Commission and NOAA National Marine Fisheries Service, showing the number of trips of
top fish groups for revenue: lobster and stone crab. Declining trends were seen in the number of lobster trips in the past five years, and all fisheries experienced
declines for some period since 2008.

Source: <a href="https://www.fisheries.noaa.gov/region/southeast#science" target='_parent'>NOAA National Marine Fisheries Service</a>
</div>

<script>
  csv   = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vThmo0alRZq1bqgYygAtmCGcz_qkcM2eShbOv5WgcsEuwK_PY5bsolTG0iFh3zNMK1VMBE1BSVWOtJC/pub?gid=1413836430&single=true&output=csv';
  title = 'Stonecrab commercial fishing trips';
  icon  = 'stonecrab';

  x_axis_label = "Year";
  y_axis_label = 'Number of commercial trips for stone crab';
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in the Google Sheet 'icons to data | fk-esr-info'."
  } 
  //The chart for hurricane coastal protections is a bar chart and has to be handled differently than all other modal windows
  else if (icon == 'hurricane-coastal-protections') {
    Highcharts.chart('container', { 
      chart: {type: 'column'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv},
      xAxis: {title: {text: "Storm Frequency"}},
      yAxis: {title: {text: "2010 Dollars"}},
      legend: {enabled: false}
    });
  }
  else if (icon == 'SST'){ // the SST modal window is another unusual case (the data format is very different)
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label, undefined, undefined, 
      SST = true
    );
  }
  else if (icon == 'stonecrab'){ // the stone crab modal window is another unusual case (2 y-axes)
    Highcharts.chart('container', { 
      chart: {type: 'line'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        yAxis: 0,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        },
        {
        yAxis: 1,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        }],
      xAxis: {
        plotBands: [{
          from: 2013, 
          to: 2018,
          color: '#DEDEFF'}],
        title: {text: x_axis_label}},
      yAxis: [{title: {text:'Stone Crab Pounds Landed'},opposite: true},  
                {title: {text:'Stone Crab Trips'},opposite: false}
        ]
    });
  }
    else if (icon == 'lobster'){ // the lobster modal window is another unusual case (2 y-axes)
    Highcharts.chart('container', { 
      chart: {type: 'line'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        yAxis: 1,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        },
        {
        yAxis: 0,
        name: 'value', 
        showInLegend: true,
        marker:{enabled: false}
        }],
      xAxis: {
        plotBands: [{
          from: 2013, 
          to: 2018,
          color: '#DEDEFF'}],
        title: {text: x_axis_label}},
      yAxis: [{title: {text:'Lobster Trips'},opposite: true},  
                {title: {text:'Lobster Landings (Pounds)'},opposite: false}
        ]
    });
  }
  else { // all other modal windows
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label
    );
  }
</script>

</body>
</html>
