<html>
<head>
  <meta charset="utf-8">
  <title>Housing disruption</title>
</head>
<body>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

Housing disruption was selected as an indicator of available ecosystem services, as a measure of social vulnerability in a
vacation destination area with high amounts of second home ownership and low availability of rentable long term housing,
both relating to high levels of tourism and gentrification. Additionally, housing disruption occurs due to hurricanes and
storms. The Florida Keys have a high level of housing disruption in all regions/municipalities, except for northern Key Largo.

Source: <a href="https://www.st.nmfs.noaa.gov/data-and-tools/social-indicators/">NOAA Office of Science and Technology coastal social vulnerability survey</a>

<script>
  csv   = 'NA';
  title = 'Housing disruption';
  icon  = 'housing-disruption';

  x_axis_label = "Year";
  y_axis_label = '';
  year_max     = 0;      // TODO: to use JS to read in max year, presumably 1st column
  years_band   = 5;
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in this Google Sheet: <a href='https://docs.google.com/spreadsheets/d/1_o8HOiZ_35uajupEsw6xLSsneTBTeLh0bqvFQvMpBNY/edit#gid=0'>icons to data | fk-esr-info</a>."
  } 
  //The chart for hurricane coastal protections is a bar chart and has to be handled differently than all other modal windows
  else if (icon == 'hurricane-coastal-protections') {
        Highcharts.chart('container', {
          chart: {type: 'column'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv},
      xAxis: {title: {text: "Storm Frequency"}},
      yAxis: {title: {text: "2010 Dollars"}},
      legend: {enabled: false},
});
  }
  else {
    Highcharts.chart('container', {
      title: {text: title},
      credits: {enabled: false},
      data: {
        csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        name: 'value', 
        showInLegend: true,
        marker: {
          enabled: false,
          fillColor: 'white',
          lineWidth: 1,
          lineColor: Highcharts.getOptions().colors[0] }}],
      xAxis: {
        plotBands: [{
          from: year_max - years_band, 
          to: year_max,
          color: '#DEDEFF'}],
        title: {text: x_axis_label}},
      yAxis: {
        title: {text: y_axis_label} }});
  }
</script>

</body>
</html>
