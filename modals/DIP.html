<html>
<head>
  <meta charset="utf-8">
  <title>Dissolved inorganic phosphorus</title>
</head>
<body>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://marinebon.org/fk-esr-info/assets/js/highcharts_wrapper.js"></script>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

Low nutrient levels are a normal condition for the waters in which coral reef ecosystems are found. Florida Keys reefs followed this limit, though a spike was seen in 2013-2014. The trend in the last five years has remained in normal range and stable.

Source: <a href="https://www.aoml.noaa.gov/data-products/#so-flo-cruise-data">NOAA Atlantic Oceanographic and Meteorological Laboratory’s South Florida Project, Ocean Chemistry and Ecosystems Division</a>

<script>
  csv   = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vScHNNnmm_bOEjzSHAkvFJtyuLr-iUl8AlUwEnU9dM4OmZJL9tDOl1giZPlXU10azuw48pZOjmGk-hb/pub?gid=1895068148&single=true&output=csv';
  title = 'Dissolved inorganic phosphorus';
  icon  = 'DIP';

  x_axis_label = "Year";
  y_axis_label = 'PO4 (µmol/L)';
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in the Google Sheet 'icons to data | fk-esr-info'."
  } 
  //The chart for hurricane coastal protections is a bar chart and has to be handled differently than all other modal windows
  else if (icon == 'hurricane-coastal-protections') {
    Highcharts.chart('container', { 
      chart: {type: 'column'},
      title: {text: title},
      credits: {enabled: false},
      data: {csvURL: csv},
      xAxis: {title: {text: "Storm Frequency"}},
      yAxis: {title: {text: "2010 Dollars"}},
      legend: {enabled: false}
    });
  }
  else if (icon == 'SST'){ // the SST modal window is another unusual case
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label, undefined, undefined, 
      SST = true
    );
  }
  else {
    createGraph(
      theData = csv, 
      graph_location = 'container', 
      title = title, 
      y_axis_label = y_axis_label
    );
  }
</script>

</body>
</html>
