<html>
<head>
  <meta charset="utf-8">
  <title>The presence of fecal indicator bacteria, fecal coliform and enterococci are measured by the Florida Healthy Beach program in order to advise beach closures due to threats to public health. The presence of these fecal indicators can be due to fecal pollution, which may come from stormwater runoff, pets and wildlife, and human sewage. This report uses the number of fecal indicator advisories issued on Florida Keys National Marine Sanctuary shoreline as an indicator of fecal bacteria presence as a threat to public health.</title>
</head>
<body>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

The presence of fecal indicator bacteria, fecal coliform and enterococci are measured by the Florida Healthy Beach program in order to advise beach closures due to threats to public health. The presence of these fecal indicators can be due to fecal pollution, which may come from stormwater runoff, pets and wildlife, and human sewage. This report uses the number of fecal indicator advisories issued on Florida Keys National Marine Sanctuary shoreline as an indicator of fecal bacteria presence as a threat to public health.

Source: <a href="http://manatee.floridahealth.gov/programs-and-services/infectious-disease-services/environmental-health/healthy-beaches/index.html">Florida Healthy Beaches program; University of Miami Abess Center</a>

<script>
  csv   = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT3c4QZPzxvH3yqYQb1aOVlMPglKmW6rgfYhAiAGRHICqwlgR_StnjyOT7RPAD3FNBXChsZhuOhxMJg/pub?gid=1525589878&single=true&output=csv';
  title = 'The presence of fecal indicator bacteria, fecal coliform and enterococci are measured by the Florida Healthy Beach program in order to advise beach closures due to threats to public health. The presence of these fecal indicators can be due to fecal pollution, which may come from stormwater runoff, pets and wildlife, and human sewage. This report uses the number of fecal indicator advisories issued on Florida Keys National Marine Sanctuary shoreline as an indicator of fecal bacteria presence as a threat to public health.';
  icon  = 'beach-closures';

  x_axis_label = "Year";
  y_axis_label = 'Number of Fecal Advisories at Keys public beaches';
  year_max     = 2018;      // TODO: to use JS to read in max year, presumably 1st column
  years_band   = 5;
  
  if (csv == 'NA'){
    document.getElementById('container').innerHTML = "<em>No data</em> yet assigned to icon <b>" + icon + "</b>. This needs to be specified in this Google Sheet: <a href='https://docs.google.com/spreadsheets/d/1_o8HOiZ_35uajupEsw6xLSsneTBTeLh0bqvFQvMpBNY/edit#gid=0'>icons to data | fk-esr-info</a>."
  } else {
    Highcharts.chart('container', {
      title: {text: title},
      credits: {enabled: false},
      data: {
        csvURL: csv,
        firstRowAsNames: true,
        startRow: 0 }, 
      series: [{
        name: 'value', 
        showInLegend: true,
        marker: {
          enabled: false,
          fillColor: 'white',
          lineWidth: 1,
          lineColor: Highcharts.getOptions().colors[0] }}],
      xAxis: {
        plotBands: [{
          from: year_max - years_band, 
          to: year_max,
          color: '#DEDEFF'}],
        title: {text: x_axis_label}},
      yAxis: {
        title: {text: y_axis_label} }});
  }
</script>

</body>
</html>
